server {
    listen 80;
    listen [::]:80;
    server_name http1.example.xyz *.http1.example.xyz;
    location / {
        return 308 https://$host$request_uri;
    }
}
server {
    listen 443 ssl;
    listen [::]:443 ssl;
    http2 off;
    server_name http1.example.xyz *.http1.example.xyz;
    ssl_certificate cert/host-http1.example.xyz.crt;
    ssl_certificate_key cert/host-http1.example.xyz.key;
    allow 172.254.1.0/24;                    # static entry;
    allow 192.168.253.0/24;                  # static entry: VPN WAN4;
    allow 192.168.243.0/24;                  # static entry: VPN WAN4;
    allow 91.217.20.0/26;                    # static entry;
    allow 91.217.21.0/26;                    # static entry;
    allow 194.226.96.192/28;                 # static entry;
    allow 31.177.66.192/28;                  # static entry;
    allow 192.168.64.26/32;                  # [Location(a1)]: [Router(l61.a1.example.org)]: WAN3;
    allow 2001:db8:abcd:1234:c000::1001/128; # [Location(a1)]: [Router(l61.a1.example.com)]: WAN36;
    allow 172.16.3.1/32;                     # [Location(a1)]: [Router(l61.a1.example.org)]: LAN3;
    allow 192.168.64.27/32;                  # [Location(a1)]: [Router(l64.a1.example.org)]: WAN3;
    allow 2001:db8:abcd:1234:c000::1002/128; # [Location(a1)]: [Router(l62.a1.example.com)]: WAN36;
    allow 172.16.3.2/32;                     # [Location(a1)]: [Router(l62.a1.example.com)]: LAN3;
    allow 192.168.64.28/32;                  # [Location(b1)]: [Router(l62.b1.example.com)]: WAN3;
    allow 2001:db8:abcd:1234:c000::2001/128; # [Location(b1)]: [Router(l62.b1.example.com)]: WAN36;
    allow 172.16.4.2/32;                     # [Location(b1)]: [Router(l62.b1.example.com)]: LAN3;
    allow 192.168.64.29/32;                  # [Location(c1)]: [Router(l61.c1.example.com)]: WAN3;
    allow 2001:db8:abcd:1234:c000::3001/128; # [Location(c1)]: [Router(l61.c1.example.com)]: WAN36;
    allow 172.16.5.2/32;                     # [Location(c1)]: [Router(l61.c1.example.com)]: LAN3;
    allow 192.168.64.30/32;                  # [Location(d1)]: [Router(l61.d1.example.com)]: WAN3;
    allow 2001:db8:abcd:1234:c000::4002/128; # [Location(d1)]: [Router(l61.d1.example.com)]: WAN36;
    allow 172.16.6.2/32;                     # [Location(d1)]: [Router(l61.d1.example.com)]: LAN3;
    allow 172.16.4.1/32;                     # [Location(a1)]: [Router(l64.a1.example.org)]: LAN3;
    allow 10.20.20.20/32;                    # [Location(a1)]: NET3;
    allow 10.20.20.21/32;                    # [Location(a1)]: NET3;
    allow 2001:db8:abcd:1234:c000::1000/128; # [Location(a1)]: WAN36;
    allow 10.10.10.0/24;                     # [Location(a1)]: LANS;
    deny all; # static entry;
    proxy_set_header X-Forwarded-For $beaver_xff_map_4f18f97d;
    location / {
        return 307 https://example.com;
    }
}
